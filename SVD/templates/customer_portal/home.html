{% extends 'customer_portal/base.html' %}
{% load static %}

{% block title %}Customer Portal - Dashboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/common.css' %}">
<link rel="stylesheet" href="{% static 'css/customer_portal/home.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid mt-4 home-background">
    <div class="home-content">
    <!-- Welcome Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="welcome-section">
                <!-- Logo on Top -->
                <div class="logo-container">
                    <img src="{% static 'images/SVD1.png' %}" alt="SVD Logo">
                </div>
                <!-- Welcome Text Below -->
                <h2>Welcome back, {{ user.name }}! ðŸ‘‹</h2>
                <p>Manage your orders, track your account, and stay updated with SVD Agencies</p>
            </div>
        </div>
    </div>

    <!-- Messages -->
    {% if messages %}
    <div class="row mb-4">
        <div class="col-12">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    <!-- Account Overview Cards -->
    <div class="row mb-4 stats-cards">
        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-3">
            <div class="card h-100 stats-card-1">
                <div class="card-body">
                    <div class="card-icon">
                        <i class="bi bi-currency-rupee"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-title">Account Balance</div>
                        <div class="card-value">â‚¹{{ user.due|floatformat:2 }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-3">
            <div class="card h-100 stats-card-2">
                <div class="card-body">
                    <div class="card-icon">
                        <i class="bi bi-shop"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-title">Shop Name</div>
                        <div class="card-value">{{ user.shop_name|default:"NA" }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-3">
            <div class="card h-100 stats-card-3">
                <div class="card-body">
                    <div class="card-icon">
                        <i class="bi bi-telephone"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-title">Phone Number</div>
                        <div class="card-value">{{ user.phone }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-3">
            <div class="card h-100 stats-card-4">
                <div class="card-body">
                    <div class="card-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <div class="card-content">
                        <div class="card-title">Account Status</div>
                        <div class="card-status {% if user.frozen %}status-frozen{% else %}status-active{% endif %}">
                            {% if user.frozen %}Frozen{% else %}Active{% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Account Details -->
    <div class="row justify-content-center">
        <div class="col-lg-3 col-md-6 col-sm-12 col-12 mb-4">
            <div class="card h-100 account-details-card">
                <div class="card-header">
                    <h5><i class="bi bi-person me-2"></i>Account Information</h5>
                </div>
                <div class="card-body">
                    <div class="info-list">
                        <div class="info-item">
                            <div class="info-icon">
                                <i class="bi bi-person"></i>
                            </div>
                            <div class="info-content">
                                <div class="info-title">Customer Name</div>
                                <div class="info-value">{{ user.name }}</div>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <i class="bi bi-telephone"></i>
                            </div>
                            <div class="info-content">
                                <div class="info-title">Phone</div>
                                <div class="info-value">{{ user.phone }}</div>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <i class="bi bi-shop"></i>
                            </div>
                            <div class="info-content">
                                <div class="info-title">Shop Name</div>
                                <div class="info-value">{{ user.shop_name|default:"Not specified" }}</div>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <i class="bi bi-credit-card"></i>
                            </div>
                            <div class="info-content">
                                <div class="info-title">Retailer ID</div>
                                <div class="info-value">{{ user.retailer_id|default:"Not assigned" }}</div>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <i class="bi bi-geo-alt"></i>
                            </div>
                            <div class="info-content">
                                <div class="info-title">Location</div>
                                <div class="info-value">
                                    {% if user.area %}{{ user.area }}, {% endif %}
                                    {% if user.city %}{{ user.city }}{% else %}City not specified{% endif %}
                                </div>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <i class="bi bi-envelope"></i>
                            </div>
                            <div class="info-content">
                                <div class="info-title">Pin Code</div>
                                <div class="info-value">{{ user.pin_code|default:"Not specified" }}</div>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <i class="bi bi-flag"></i>
                            </div>
                            <div class="info-content">
                                <div class="info-title">State</div>
                                <div class="info-value">{{ user.state|default:"Not specified" }}</div>
                            </div>
                        </div>
                    </div>

                    <div class="text-end mt-4">
                        <a href="{% url 'customer_portal:update_profile' %}" class="btn">
                            <i class="bi bi-pencil-square me-2"></i>Update Profile
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>


{% endblock %}
